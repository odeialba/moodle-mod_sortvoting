define("mod_sortvoting/sortvoting",["exports","core/notification","core/ajax"],(function(_exports,_notification,_ajax){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * AMD module used when saving a new sort voting.
   *
   * @module      mod_sortvoting/issues-list
   * @copyright   2023 Odei Alba <odeialba@odeialba.com>
   * @license     https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=function(){document.addEventListener("click",(event=>{const saveSortVoteElement=event.target.closest(SELECTORS_SAVEVOTE);saveSortVoteElement&&(event.preventDefault(),function(saveSortVoteElement){saveSortVoteElement.setAttribute("disabled",!0);var sortvotingid=document.getElementsByName("sortvotingid")[0].value,options=document.getElementsByName("option[]"),votes=[],positions=[];if(options.forEach((function(option){positions.push(option.value),votes.push({position:option.value,optionid:option.getAttribute("data-optionid")})})),new Set(positions).size!==positions.length)return window.alert("All positions must be unique"),void saveSortVoteElement.removeAttribute("disabled");_ajax.default.call([{methodname:"mod_sortvoting_save_vote",args:{sortvotingid:sortvotingid,votes:votes}}])[0].done((function(){window.location.reload()})).fail(_notification.default.exception)}(saveSortVoteElement))}))},_notification=_interopRequireDefault(_notification),_ajax=_interopRequireDefault(_ajax);const SELECTORS_SAVEVOTE="[data-action='savevote']"}));

//# sourceMappingURL=sortvoting.min.js.map